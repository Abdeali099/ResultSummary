<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Result-Dashboard</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <style>
        .heading {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 2rem;
            font-family: math;
        }

        .img {
            width: 120px;
            height: auto;
        }

        .studentBio {
            display: flex;
            align-items: baseline;
            gap: 1rem;
        }

        .studentBio-label {
            font-weight: bolder;
        }

        .studentBio-input {
            display: inline !important;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .row-heading,
        .make-bold {
            font-weight: bold;
        }

        .marks-taker {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1.2rem;
        }

        .marks-taker input {
            width: auto !important;
            text-align: center !important;
        }

        .marks-taker,
        .overAll-td span {
            font-size: 1.2rem;
            white-space: nowrap;
            /* Ensures the text doesn't wrap to a new line */
        }

        .percentage {
            margin-top: 1rem;
            display: flex;
            align-items: center !important;
            justify-content: center;
            gap: 1rem;
        }

        .overAll-td {
            /* display: flex;
            flex-direction: column; */
            gap: 1rem;
        }

        .overAll-td input {

            width: 65%;
            text-align: center !important;
            display: inline;
        }

        .allOverDiv {
            justify-content: space-evenly !important;
            margin: 8px;
        }

        .totalMarks {
            border: 1px dashed rgb(165, 159, 159);
            padding: 1px;
        }
    </style>


</head>

<body>

    <div class="container" style="border: 1px solid black;margin:4rem auto">

        <div class="row mt-3">

            <div class="col-12 text-center heading">
                <img src="https://msubaroda.ac.in/asset/images/msulogo412.png" alt="University Logo" class="mb-2 img">
                <h1>The Maharaja Sayajiro University of Baroda</h1>
            </div>

        </div>

        <div class="row mt-3">

            <div class="mb-3 col-6 studentBio">
                <label for="numberField" class="form-label studentBio-label">PRN</label>
                <input type="text" class="form-control studentBio-input" id="numberField" pattern="\d{17}" required>
            </div>

            <div class="mb-3 col-6 studentBio">
                <label for="nameField" class="form-label studentBio-label">Name</label>
                <input type="text" class="form-control studentBio-input" id="nameField" required>
            </div>

        </div>

        <div class="row mt-3">

            <div class="col-12">

                <table class="table table-bordered">

                    <thead>

                        <tr>
                            <th rowspan="2" class="text-center align-middle">Semester</th>
                            <th colspan="3" class="text-center">Year</th>
                        </tr>

                        <tr>
                            <th class="text-center">BE-I</th>
                            <th class="text-center">BE-II</th>
                            <th class="text-center">BE-III</th>
                        </tr>

                    </thead>

                    <tbody>
                        <tr>

                            <td class="row-heading text-center align-middle">1<sup>st</sup> Semester</td>

                            <td>

                                <div class="marks-taker">
                                    <input type="number" class="form-control" id="sem1be1">
                                    <span>/
                                        <span id="sem1be1_TM" class="totalMarks" contenteditable="true">700</span>
                                    </span>
                                </div>

                                <span class="percentage"><span class="make-bold">Percentage:</span> <span
                                        id="sem1be1-percentage"></span>%</span>

                            </td>

                            <td>

                                <div class="marks-taker">
                                    <input type="number" class="form-control" id="sem1be2">
                                    <span>/
                                        <span id="sem1be2_TM" class="totalMarks" contenteditable="true">700</span>
                                    </span>
                                </div>

                                <span class="percentage"><span class="make-bold">Percentage:</span> <span
                                        id="sem1be2-percentage"></span>%</span>

                            </td>

                            <td>

                                <div class="marks-taker">
                                    <input type="number" class="form-control" id="sem1be3">
                                    <span>/
                                        <span id="sem1be3_TM" class="totalMarks" contenteditable="true">650</span>
                                    </span>
                                </div>

                                <span class="percentage"><span class="make-bold">Percentage:</span> <span
                                        id="sem1be3-percentage"></span>%</span>
                            </td>


                        </tr>

                        <tr>

                            <td class="row-heading text-center align-middle">2<sup>nd</sup> Semester</td>

                            <td>

                                <div class="marks-taker">
                                    <input type="number" class="form-control" id="sem2be1">
                                    <span>/
                                        <span id="sem2be1_TM" class="totalMarks" contenteditable="true">700</span>
                                    </span>
                                </div>

                                <span class="percentage"><span class="make-bold">Percentage:</span> <span
                                        id="sem2be1-percentage"></span>%</span>
                            </td>

                            <td>

                                <div class="marks-taker">

                                    <input type="number" class="form-control" id="sem2be2">

                                    <span>/
                                        <span id="sem2be2_TM" class="totalMarks" contenteditable="true">700</span>
                                    </span>

                                </div>

                                <span class="percentage"><span class="make-bold">Percentage:</span> <span
                                        id="sem2be2-percentage"></span>%</span>
                            </td>

                            <td>

                                <div class="marks-taker">

                                    <input type="number" class="form-control" id="sem2be3">
                                    <span>/
                                        <span id="sem2be3_TM" class="totalMarks" contenteditable="true">650</span>
                                    </span>
                                </div>

                                <span class="percentage"><span class="make-bold">Percentage:</span> <span
                                        id="sem2be3-percentage"></span>%</span>
                            </td>

                        </tr>

                        <tr>

                            <td class="row-heading text-center align-middle">Over All</td>

                            <td>

                                <div class="overAll-td">
                                    <div class="allOverDiv">

                                        <input value="0.0" type="number" class="form-control overall-input"
                                            id="overallbe1_mark" disabled>
                                        <span>/
                                            <span id="be1_TM" class="totalMarks_all">1400</span>
                                        </span>
                                    </div>

                                    <div class="allOverDiv">

                                        <input value="0.0" type="number" class="form-control overall-input"
                                            id="overallbe1_perc" disabled>
                                        <span>%</span>
                                    </div>

                                </div>

                            </td>

                            <td>

                                <div class="overAll-td">

                                    <div class="allOverDiv">

                                        <input type="number" value="0.0" class="form-control overall-input"
                                            id="overallbe2_mark" disabled>
                                        <span>/
                                            <span id="be2_TM" class="totalMarks_all">1400</span>
                                        </span>
                                    </div>

                                    <div class="allOverDiv">

                                        <input type="number" value="0.0" class="form-control overall-input"
                                            id="overallbe2_perc" disabled>
                                        <span>%</span>
                                    </div>

                                </div>

                            </td>

                            <td>

                                <div class="overAll-td">

                                    <div class="allOverDiv">

                                        <input type="number" value="0.0" class="form-control overall-input"
                                            id="overallbe3_mark" disabled>
                                        <span>/
                                            <span id="be3_TM" class="totalMarks_all">1300</span>
                                        </span>
                                    </div>

                                    <div class="allOverDiv">


                                        <input type="number" value="0.0" class="form-control overall-input"
                                            id="overallbe3_perc" disabled>
                                        <span>%</span>

                                    </div>

                                </div>
                            </td>

                        </tr>

                    </tbody>

                </table>

            </div>

        </div>

    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>

    <script>

        /* Taking all total marks */

        const semesterMarksElements = [
            ["sem1be1_TM", "sem2be1_TM", "be1_TM"],
            ["sem1be2_TM", "sem2be2_TM", "be2_TM"],
            ["sem1be3_TM", "sem2be3_TM", "be3_TM"]
        ];

        for (let i = 0; i < semesterMarksElements.length; i++) {
            const [sem1Id, sem2Id, beId] = semesterMarksElements[i];
            const sem1Element = document.getElementById(sem1Id);
            const sem2Element = document.getElementById(sem2Id);
            const beElement = document.getElementById(beId);

            sem1Element.addEventListener("input", updateBEMarks);
            sem2Element.addEventListener("input", updateBEMarks);

            function updateBEMarks() {
                const sem1Total = parseInt(sem1Element.textContent) || 0;
                const sem2Total = parseInt(sem2Element.textContent) || 0;
                const totalMarks = sem1Total + sem2Total;
                beElement.textContent = totalMarks;
                updateOverallDetails();
            }

        }

        /* Calculate percentages */

        function calculatePercentage(inputId, percentageId, totalMark) {

            const input = document.getElementById(inputId);
            const percentage = document.getElementById(percentageId);

            input.addEventListener('input', () => {
                const mark = input.value;
                const percentageValue = (mark / parseInt(totalMark)) * 100;

                percentage.textContent = percentageValue.toFixed(2);
            });

        }

        /* Geting all totalMarks */
        let BEI_SEM1_Total_marks = document.getElementById("sem1be1_TM");
        let BEII_SEM1_Total_marks = document.getElementById("sem1be2_TM");
        let BEIII_SEM1_Total_marks = document.getElementById("sem1be3_TM");

        let BEI_SEM2_Total_marks = document.getElementById("sem2be1_TM");
        let BEII_SEM2_Total_marks = document.getElementById("sem2be2_TM");
        let BEIII_SEM2_Total_marks = document.getElementById("sem2be3_TM");

        /* This method calls when page load and waiting for inputs */
        calculatePercentage('sem1be1', 'sem1be1-percentage', BEI_SEM1_Total_marks.textContent);
        calculatePercentage('sem1be2', 'sem1be2-percentage', BEII_SEM1_Total_marks.textContent);
        calculatePercentage('sem1be3', 'sem1be3-percentage', BEIII_SEM1_Total_marks.textContent);
        calculatePercentage('sem2be1', 'sem2be1-percentage', BEI_SEM2_Total_marks.textContent);
        calculatePercentage('sem2be2', 'sem2be2-percentage', BEII_SEM2_Total_marks.textContent);
        calculatePercentage('sem2be3', 'sem2be3-percentage', BEIII_SEM2_Total_marks.textContent);

        function updateOverallDetails() {

            /* Update overall marks  */

            const overallBe1_mark = document.getElementById('overallbe1_mark');
            const overallBe2_mark = document.getElementById('overallbe2_mark');
            const overallBe3_mark = document.getElementById('overallbe3_mark');

            overallBe1_mark.value = (+document.getElementById('sem1be1').value + +document.getElementById('sem2be1').value);
            overallBe2_mark.value = (+document.getElementById('sem1be2').value + +document.getElementById('sem2be2').value);
            overallBe3_mark.value = (+document.getElementById('sem1be3').value + +document.getElementById('sem2be3').value);

            /* Update the percentage */
            document.getElementById('overallbe1_perc').value = (overallBe1_mark.value * 100 / parseInt(document.getElementById("be1_TM").textContent || 0)).toFixed(2);
            document.getElementById('overallbe2_perc').value = (overallBe2_mark.value * 100 / parseInt(document.getElementById("be2_TM").textContent || 0)).toFixed(2);
            document.getElementById('overallbe3_perc').value = (overallBe3_mark.value * 100 / parseInt(document.getElementById("be3_TM").textContent || 0)).toFixed(2);

        }

        /* This method call first  : root method */
        /* Update overall marks and percentage when any input changes */
        const inputs = document.querySelectorAll('.form-control');

        inputs.forEach((input) => {
            input.addEventListener('input', () => {
                updateOverallDetails();
            });

        });

    </script>

</body>

</html>
